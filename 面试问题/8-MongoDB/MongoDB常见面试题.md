## MongoDB常见面试题

### 1、MongoDB与MySQL的区别

```
MongoDB的本质是文档型数据库,它不会遵循一些约束,比如:sql标准,ACID属性,表结构等。
主要特性：
  1、面向集合文档的存储，适合存储bson(json的扩展)形式的数据
  2、格式自由，数据格式不固定，生产环境下修改结构都可以不影响程序运行
  3、强大的查询语句，面向对象的查询语言，基本覆盖sql语言的所有能力
  4、完整的索引支持，支持查询计划
  5、支持复制和自动故障转移
  6、支持二进制数据及大型对象（文件）的高效存储
  7、使用分片集群提升系统扩展性
  8、使用内存映射存储引擎，把磁盘的IO操作转换成为内存的操作
```

### 2、MongoDB主要应用场景

```
1、游戏场景：存储用户信息，用户装备、积分等直接以内嵌文档的形式存储，方便查询更新。
2、物流场景：存储订单信息，订单状态在运送过程中会不断更新，以MongoDB内嵌数组的形式来存储,一次查  询就能将订单所有的变更读取出来。
3、社交场景：使用MongoDB存储用户信息,以及用户发表的朋友圈信息,通过地理位置索引实现附近的人、地点等功能。
4、物联网场景：使用MongoDB存储所有接入的智能设备信息,以及设备汇报的日志信息,并对这些信息进行多维度的分析。
5、视频直播：使用MongoDB存储用户信息、礼物信息等
```

### 3、如何做MongoDB查询优化

```
找出慢速查询
    1、开启内置的查询分析器，记录读写操作效率
       db.setProfilingLevel(n,{m}),n的取值可选0,1,2；
       0 是默认值表示不记录
       1 表示记录慢速操作,如果值为1,m必须赋值单位为ms,用于定义查询时间的阈值
       2 表示记录所有的读写操作
         例如：db.setProfilingLevel(1,300)
     2、查询监控结果
        监控结果保存在一个特殊的盖子集合system.profile里,这个集合分配了128kb的空间,要确保监       控分析数据不会消耗太多的系统性资源,盖子集合维护了自然的插入顺序,可以使用$natural操作符       进行排序,如:db.system.profile.find().sort({'$natural':-1}).limit(5)
 
 分析慢速查询
     找出慢速查询的原因比较棘手，原因可能有多个：应用程序设计不合理、不正确的数据模型，硬件配置问题，缺少索引等。
     
    


```

